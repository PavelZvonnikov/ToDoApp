{"remainingRequest":"/home/pavel/Documents/Vue/Weather widget/Виджет погоды/node_modules/babel-loader/lib/index.js!/home/pavel/Documents/Vue/Weather widget/Виджет погоды/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/pavel/Documents/Vue/Weather widget/Виджет погоды/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pavel/Documents/Vue/Weather widget/Виджет погоды/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pavel/Documents/Vue/Weather widget/Виджет погоды/src/App.vue","mtime":1570099493806},{"path":"/home/pavel/Documents/Vue/Weather widget/Виджет погоды/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pavel/Documents/Vue/Weather widget/Виджет погоды/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/pavel/Documents/Vue/Weather widget/Виджет погоды/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pavel/Documents/Vue/Weather widget/Виджет погоды/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/pavel/Documents/Vue/Weather widget/\\u0412\\u0438\\u0434\\u0436\\u0435\\u0442 \\u043F\\u043E\\u0433\\u043E\\u0434\\u044B/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Info from \"./components/Info.vue\";\nimport Form from \"./components/Form.vue\";\nimport Weather from \"./components/Weather.vue\";\nexport default {\n  name: 'app',\n  components: {\n    Info: Info,\n    Form: Form,\n    Weather: Weather\n  },\n  data: function data() {\n    return {\n      arr: [],\n      key: '23fbf964c1eb2fa295dd50b21b675122',\n      city: '',\n      flag: false,\n      weatherFlag: false,\n      id: 0\n    };\n  },\n  methods: {\n    gettingWeather: function () {\n      var _gettingWeather = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(e) {\n        var link, data, route, data1, synSunset, date, sunset, obj;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!this.city) {\n                  _context.next = 30;\n                  break;\n                }\n\n                _context.next = 4;\n                return fetch(\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(this.city, \"&appid=\").concat(this.key, \"&units=metric\"));\n\n              case 4:\n                link = _context.sent;\n                _context.next = 7;\n                return link.json();\n\n              case 7:\n                data = _context.sent;\n                _context.next = 10;\n                return fetch(\"https://kladr-api.com/api.php?query=\\u041C\\u043E\\u0441\\u043A\\u0432\\u0430&contentType=city&withParent=1\");\n\n              case 10:\n                route = _context.sent;\n                _context.next = 13;\n                return route.json();\n\n              case 13:\n                data1 = _context.sent;\n                console.log(data1);\n                synSunset = data.sys.sunset;\n                date = new Date(synSunset * 1000);\n                sunset = \"\".concat(date.getHours(), \":\").concat(date.getMinutes(), \":\").concat(date.getSeconds());\n                obj = {};\n                obj.temp = data.main.temp;\n                obj.city = data.name;\n                obj.country = data.sys.country;\n                obj.pressure = data.main.pressure;\n                obj.sunset = sunset;\n                obj.id = this.id;\n                this.arr.push(obj);\n                this.weatherFlag = true;\n                this.id++; // console.log(this.arr.some(function(elem) {\n                //   return elem.city == this.city \n                // }));\n\n                _context.next = 31;\n                break;\n\n              case 30:\n                if (this.city == '') {\n                  this.flag = true;\n                  this.weatherFlag = false;\n                }\n\n              case 31:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function gettingWeather(_x) {\n        return _gettingWeather.apply(this, arguments);\n      }\n\n      return gettingWeather;\n    }(),\n    inputChange: function () {\n      var _inputChange = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(e) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // e.preventDefault();\n                this.city = e.target.value; // const link = await \n                //   fetch(`https://kladr-api.com/api.php?query=${this.city}&contentType=city&withParent=1`);\n                // const data = await link.json();   \n                // console.log(data);\n\n                if (this.city) {\n                  this.flag = false;\n                }\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function inputChange(_x2) {\n        return _inputChange.apply(this, arguments);\n      }\n\n      return inputChange;\n    }()\n  }\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAoBA,OAAA,IAAA;AACA,OAAA,IAAA;AACA,OAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,KADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,IAAA,EAAA,IAFA;AAGA,IAAA,OAAA,EAAA;AAHA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,GAAA,EAAA,EADA;AAEA,MAAA,GAAA,EAAA,kCAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA,KAJA;AAKA,MAAA,WAAA,EAAA,KALA;AAMA,MAAA,EAAA,EAAA;AANA,KAAA;AAQA,GAhBA;AAiBA,EAAA,OAAA,EAAA;AACA,IAAA,cAAA;AAAA;AAAA;AAAA,8BAAA,iBAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,CAAA,CAAA,cAAA;;AADA,qBAEA,KAAA,IAFA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAIA,KAAA,6DAAA,KAAA,IAAA,oBAAA,KAAA,GAAA,mBAJA;;AAAA;AAGA,gBAAA,IAHA;AAAA;AAAA,uBAKA,IAAA,CAAA,IAAA,EALA;;AAAA;AAKA,gBAAA,IALA;AAAA;AAAA,uBAQA,KAAA,0GARA;;AAAA;AAOA,gBAAA,KAPA;AAAA;AAAA,uBASA,KAAA,CAAA,IAAA,EATA;;AAAA;AASA,gBAAA,KATA;AAWA,gBAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AAEA,gBAAA,SAbA,GAaA,IAAA,CAAA,GAAA,CAAA,MAbA;AAeA,gBAAA,IAfA,GAeA,IAAA,IAAA,CAAA,SAAA,GAAA,IAAA,CAfA;AAgBA,gBAAA,MAhBA,aAgBA,IAAA,CAAA,QAAA,EAhBA,cAgBA,IAAA,CAAA,UAAA,EAhBA,cAgBA,IAAA,CAAA,UAAA,EAhBA;AAkBA,gBAAA,GAlBA,GAkBA,EAlBA;AAoBA,gBAAA,GAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AACA,gBAAA,GAAA,CAAA,IAAA,GAAA,IAAA,CAAA,IAAA;AACA,gBAAA,GAAA,CAAA,OAAA,GAAA,IAAA,CAAA,GAAA,CAAA,OAAA;AACA,gBAAA,GAAA,CAAA,QAAA,GAAA,IAAA,CAAA,IAAA,CAAA,QAAA;AACA,gBAAA,GAAA,CAAA,MAAA,GAAA,MAAA;AACA,gBAAA,GAAA,CAAA,EAAA,GAAA,KAAA,EAAA;AAEA,qBAAA,GAAA,CAAA,IAAA,CAAA,GAAA;AACA,qBAAA,WAAA,GAAA,IAAA;AACA,qBAAA,EAAA,GA7BA,CA8BA;AACA;AACA;;AAhCA;AAAA;;AAAA;AAkCA,oBAAA,KAAA,IAAA,IAAA,EAAA,EAAA;AACA,uBAAA,IAAA,GAAA,IAAA;AACA,uBAAA,WAAA,GAAA,KAAA;AACA;;AArCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,OADA;AAwCA,IAAA,WAAA;AAAA;AAAA;AAAA,8BAAA,kBAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,qBAAA,IAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAFA,CAGA;AACA;AACA;AAEA;;AACA,oBAAA,KAAA,IAAA,EAAA;AACA,uBAAA,IAAA,GAAA,KAAA;AACA;;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAxCA;AAjBA,CAAA","sourcesContent":["<template>\n  <div class=\"wraper\">\n    <Info />\n    <Form \n      :weatherMethod=\"gettingWeather\" \n      :inputChange=\"inputChange\" \n      :city=\"city\"\n    />\n    <ul v-if=\"weatherFlag\">\n      <Weather \n        v-for=\"item in arr\"\n        :obj=\"item\"\n        :key=\"item.id\"\n      />\n    </ul>\n    <p v-if=\"this.flag\">Введите название города</p>\n  </div>  \n</template>\n\n<script>\nimport Info from './components/Info.vue';\nimport Form from './components/Form.vue';\nimport Weather from './components/Weather.vue';\n\nexport default {\n  name: 'app',\n  components: {\n    Info,\n    Form,\n    Weather\n  },\n  data() {\n    return {\n      arr: [],\n      key: '23fbf964c1eb2fa295dd50b21b675122',\n      city: '',\n      flag: false,\n      weatherFlag: false,\n      id: 0,\n    }\n  },\n  methods: {\n    gettingWeather: async function (e) {\n      e.preventDefault();\n      if (this.city) {\n        const link = await \n        fetch(`https://api.openweathermap.org/data/2.5/weather?q=${this.city}&appid=${this.key}&units=metric`);\n        const data = await link.json();\n\n        const route = await \n        fetch(`https://kladr-api.com/api.php?query=Москва&contentType=city&withParent=1`);\n        const data1 = await route.json();   \n      \n        console.log(data1);\n\n        const synSunset = data.sys.sunset;\n\n        const date = new Date(synSunset * 1000);\n        const sunset = `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\n\n        const obj = {};\n\n        obj.temp = data.main.temp;\n        obj.city = data.name;\n        obj.country = data.sys.country;\n        obj.pressure = data.main.pressure;\n        obj.sunset = sunset;\n        obj.id = this.id;\n\n        this.arr.push(obj);\n        this.weatherFlag = true;\n        this.id++;\n        // console.log(this.arr.some(function(elem) {\n        //   return elem.city == this.city \n        // }));\n      }\n      else if (this.city == '') {\n        this.flag = true;\n        this.weatherFlag = false;\n      }  \n    },\n    inputChange: async function (e) {\n      // e.preventDefault();\n      this.city = e.target.value;\n      // const link = await \n      //   fetch(`https://kladr-api.com/api.php?query=${this.city}&contentType=city&withParent=1`);\n      // const data = await link.json();   \n      \n      // console.log(data);\n      if (this.city) {\n        this.flag = false;\n      }\n    },\n  },\n}\n</script>\n\n<style>\n  ul {\n    margin-left: 0;\n    padding-left: 0; \n   }\n</style>\n"],"sourceRoot":"src"}]}